@using Pulsesync.IngoTPCC.Authorization
<div id="Assessment" class="row-class" ng-controller="tenant.views.assessment.assessmentDetailView as vm">

    <!-- Person Header & Action buttons -->
    <ps-uib-tabset tab-template="false" is-pinned="vm.personHeaderisPinned" style="margin-top: -10px;">
        <ps-uib-tab-person-header>
            <person-header person-id="vm.model.actualAssessment.personId" referral-id="vm.model.actualAssessment.referralId"></person-header>
        </ps-uib-tab-person-header>

        <ps-uib-tab-button>
            <div class="col-md-12 col-sm-12" style="padding: 10px 0px 0px 0px;">
                <div class="form-actions pull-right txt-align-cntr">

                    <a class="linkButton btn-small no-right-left-padding" ng-click="vm.save()" ng-if="vm.permissions.edit && !vm.model.isConfirmed && !vm.model.isCancelled && !vm.model.actualAssessment.isReplicatedToPerson" ng-class="{'disabled-link': vm.isSavingDisabled }">
                        <i class="material-icons  font-18-main v-top">save</i> @L("Save")
                    </a>
                    <a class="linkButton btn-small no-right-left-padding" ng-click="vm.save(true)" ng-if="vm.permissions.edit && !vm.model.isConfirmed && !vm.model.isCancelled && !vm.model.actualAssessment.isReplicatedToPerson">
                        <i class="ps-icon-1x ps-icon-savenclose grey"></i> @L("SaveAndClose")
                    </a>
                    <a class="linkButton btn-small no-right-left-padding" ng-click="vm.clone()" ng-if="vm.permissions.copyExisting && !vm.isNew && !vm.model.isCancelled && !vm.model.actualAssessment.isReplicatedToPerson">
                        <i class="material-icons  font-18-main v-top">content_copy</i> @L("Copy")
                    </a>
                    <a class="linkButton btn-small no-right-left-padding" ng-click="vm.confirm()" ng-if="vm.permissions.confirm && !vm.isNew && !vm.model.isConfirmed && !vm.model.isCancelled && !vm.model.actualAssessment.isReplicatedToPerson">
                        <i class="material-icons  font-18-main v-top">lock</i> @L("Confirm")
                    </a>
                    <a class="linkButton btn-small no-right-left-padding" ng-click="vm.cancel()" ng-if="vm.permissions.cancel && !vm.isNew && !vm.model.isCancelled && !vm.model.actualAssessment.isReplicatedToPerson">
                        <i class="material-icons  font-18-main v-top">block</i> @L("Cancel")
                    </a>
                    <a class="linkButton btn-small no-right-left-padding" ng-click="vm.delete()" ng-if="!vm.isNew && vm.permissions.delete && !vm.model.isConfirmed && !vm.model.isCancelled && !vm.model.actualAssessment.isReplicatedToPerson">
                        <i class="material-icons  font-18-main v-top">delete_forever</i> @L("Delete")
                    </a>
                    <a class="linkButton btn-small no-right-left-padding" ng-click="vm.close()" ng-if="!vm.loading">
                        <i class="material-icons  font-18-main v-top">close</i> @L("Close")
                    </a>
                </div>
            </div>
        </ps-uib-tab-button>
    </ps-uib-tabset>

    <div class="tab-content">
        <div id="PersonDetails" class="tab-pane fade in active">
            <div class="col-md-12 col-sm-12">
                <form action="" angular-validator="" angular-validator-submit="vm.save($event)" dirty-check="" method="post" name="vm.form" novalidate="" class="ng-valid-maxdate ng-valid-angular-validator ng-valid-required ng-dirty ng-valid-parse ng-valid ng-valid-ui-select-required">
                    <assessment-general-view id="General" mode="vm.mode" model="vm.model" permissions="vm.permissions"></assessment-general-view>
                    <assessment-question-view id="AssessmentQuestion" mode="vm.mode" model="vm.model" permissions="vm.permissions"></assessment-question-view>
                </form>
            </div>
        </div>
    </div>
</div>